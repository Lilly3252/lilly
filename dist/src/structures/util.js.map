{"version":3,"file":"util.js","sourceRoot":"./src/","sources":["src/structures/util.ts"],"names":[],"mappings":"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","sourcesContent":["import { readdirSync } from 'fs';\r\nimport path from 'path';\r\nimport type { SlashCommand, event } from './index.js';\r\nimport type lillyclient from './lillyClient.js';\r\nimport { fileURLToPath } from 'url';\r\nimport { dirname } from 'path';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = dirname(__filename);\r\n\r\n\r\nconst inviteRegex = /(https?:\\/\\/)?(www\\.|canary\\.|ptb\\.)?discord(\\.gg|(app)?\\.com\\/invite|\\.me)\\/([^ ]+)\\/?/gi;\r\nconst botInvRegex = /(https?:\\/\\/)?(www\\.|canary\\.|ptb\\.)?discord(app)?\\.com\\/(api\\/)?oauth2\\/authorize\\?([^ ]+)\\/?/gi;\r\n\r\n\r\n\r\nexport default class Utils {\r\n  client: lillyclient;\r\n  constructor(a: lillyclient) {\r\n    this.client = a;\r\n  }\r\n  shorten({ a, b = 2000 }: { a: string; b?: number; }): string {\r\n    return shorten();\r\n\r\n\r\n    function shorten(): string {\r\n      return a.length > b ? `${a.substring(0, b - 3)}...` : a;\r\n    }\r\n  }\r\n\r\n  list(a: unknown[], b = \"and\") {\r\n    return list();\r\n\r\n    function list() {\r\n      const c = a.length;\r\n      return c === 0\r\n        ? \"\"\r\n        : c === 1\r\n          ? a[0]\r\n          : `${a.slice(0, -1).join(\", \")}${c > 1 ? `${c > 2 ? \",\" : \"\"} ${b} ` : \"\"}${a.slice(-1)}`;\r\n    }\r\n  }\r\n  formatNumberK(a: number) {\r\n    return formatNumber();\r\n\r\n    function formatNumber() {\r\n      return a > 999\r\n        ? `${(a / 1e3).toLocaleString(void 0, { maximumFractionDigits: 1 })}K`\r\n        : a;\r\n    }\r\n  }\r\n  stripInvites(\r\n    a: string,\r\n    { guild: b = true, bot: c = true, text: d = \"[redacted invite]\" } = {}\r\n  ) {\r\n    return stripInvites();\r\n\r\n    function stripInvites() {\r\n      return b && (a = a.replace(inviteRegex, d)),\r\n        c && (a = a.replace(botInvRegex, d)),\r\n        a;\r\n    }\r\n  }\r\n  delay(a: number) {\r\n    return delay();\r\n\r\n    function delay() {\r\n      return new Promise((b) => setTimeout(b, a));\r\n    }\r\n  }\r\n  isClass(a: { prototype: unknown; toString: () => string; }) {\r\n    return isClass();\r\n\r\n    function isClass() {\r\n      return typeof a == \"function\" &&\r\n        typeof a.prototype == \"object\" &&\r\n        a.toString().substring(0, 5) === \"class\";\r\n    }\r\n  }\r\n\r\n  trimArray(a: string[], b = 10) {\r\n    return trimArray();\r\n\r\n    function trimArray() {\r\n      if (a.length > b) {\r\n        const c = a.length - b;\r\n        (a = a.slice(0, b)), a.push(`${c} more...`);\r\n      }\r\n    }\r\n  }\r\n  formatBytes(a: number) {\r\n    if (a === 0) return \"0 Bytes\";\r\n    const b = Math.floor(Math.log(a) / Math.log(1024));\r\n    return `${parseFloat((a / Math.pow(1024, b)).toFixed(2))} ${[\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"][b]\r\n      }`;\r\n  }\r\n  removeDuplicates(a: Iterable<unknown>) {\r\n    return [...new Set(a)];\r\n  }\r\n  capitalize(a: string) {\r\n    return capitalize();\r\n\r\n    function capitalize() {\r\n      return a\r\n        .split(\" \")\r\n        .map((a: string) => a.slice(0, 1).toUpperCase() + a.slice(1))\r\n        .join(\" \");\r\n    }\r\n  }\r\n  toTitleCase(str: string) {\r\n    return toTitleCase();\r\n\r\n    function toTitleCase() {\r\n      return str.replace(\r\n        /\\w\\S*/g,\r\n        function (txt: string) {\r\n          return txt.charAt(0).toUpperCase() + txt.substring(1).toLowerCase();\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  comparePerms(a: { roles: { highest: { position: number; }; }; }, b: { roles: { highest: { position: number; }; }; }) {\r\n    return comparePerms();\r\n\r\n    function comparePerms() {\r\n      return a.roles.highest.position < b.roles.highest.position;\r\n    }\r\n  }\r\n\r\n  formatArray(a: string, b = \"conjunction\") {\r\n    return formatArray();\r\n\r\n    function formatArray() {\r\n      return new Intl.ListFormat(\"en-GB\", {\r\n        style: \"short\",\r\n        type: b as Intl.ListFormatType,\r\n      }).format(a);\r\n    }\r\n  }\r\n\r\n  async loadCommands() {\r\n    const slashyFiles = readdirSync(path.resolve(__dirname, 'commands')).filter(file => file.toString().endsWith('.js'));\r\n    (async () => {\r\n      for (const commandFile of slashyFiles) {\r\n        const slashy: SlashCommand = await import(path.resolve(__dirname, 'commands', commandFile));\r\n        this.client.commands.set(slashy.slashy.name, slashy);\r\n      }\r\n    });\r\n  }\r\n  async loadEvents() {\r\n    const eventFiles = readdirSync(path.resolve(__dirname, 'events')).filter(file => file.toString().endsWith('.js'));\r\n    for (const eventFile of eventFiles) {\r\n      const event: event = await import(path.resolve(__dirname, 'events', eventFile));\r\n      if (event.once) {\r\n        this.client.on(event.name, (...args) => event.run(...args));\r\n      } else {\r\n        this.client.on(event.name, (...args) => event.run(...args));\r\n      }\r\n    }\r\n  }\r\n}"]}